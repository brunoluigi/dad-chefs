<%= form_with(model: message, url: chat_messages_path(@chat), id: "new_message", class: "flex gap-3 items-end", data: { controller: "chat-form" }) do |form| %>
  <% if message.errors.any? %>
    <div class="mb-3 p-3 bg-red-50 text-red-700 rounded-lg text-sm">
      <ul class="list-disc list-inside">
        <% message.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form.text_area :content,
      class: "flex-1 rounded-lg border-gray-300 shadow-sm focus:border-amber-500 focus:ring focus:ring-amber-200 focus:ring-opacity-50 px-4 py-3 resize-none",
      rows: 2,
      placeholder: "Ask your Sous Chef anything... (Enter for new line, Shift+Enter to send)",
      autofocus: true,
      autocomplete: "off",
      data: { chat_form_target: "input", action: "keydown->chat-form#handleKeydown" } %>
  <%= form.submit "Send",
      class: "rounded-lg bg-amber-600 px-6 py-3 font-semibold text-white shadow-sm hover:bg-amber-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-amber-600 transition-colors cursor-pointer" %>
<% end %>